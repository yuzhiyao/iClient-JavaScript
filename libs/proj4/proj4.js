!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.proj4=e()}(this,function(){"use strict";function t(t,e){if(t[e])return t[e];for(var a,r=Object.keys(t),n=e.toLowerCase().replace(ft,""),s=-1;++s<r.length;)if(a=r[s],a.toLowerCase().replace(ft,"")===n)return t[a]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=mt}function a(t){return new e(t).output()}function r(t,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var r=e?{}:t,s=a.reduce(function(t,e){return n(e,t),t},r);e&&(t[e]=s)}function n(t,e){if(Array.isArray(t)){var a=t.shift();if("PARAMETER"===a&&(a=t.shift()),1===t.length)return Array.isArray(t[0])?(e[a]={},void n(t[0],e[a])):void(e[a]=t[0]);if(t.length)if("TOWGS84"!==a){Array.isArray(a)||(e[a]={});var s;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[a]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&n(t[2],e[a]));case"SPHEROID":case"ELLIPSOID":return e[a]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&n(t[3],e[a]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,a,t);default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return n(t,e[a]);return r(e,a,t)}}else e[a]=t;else e[a]=!0}else e[t]=!0}function s(t,e){var a=e[0],r=e[1];!(a in t)&&r in t&&(t[a]=t[r],3===e.length&&(t[a]=e[2](t[a])))}function i(t){return t*vt}function o(t,e){function a(e){return e*(t.to_meter||1)}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,e&&e.length>0){var r="";e.forEach(function(t){t.length>=2&&(r+=t[1].substring(0,1).toLowerCase())}),2===r.length&&(r+="u"),3===r.length&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var n=t.GEOGCS;"GEOGCS"===t.type&&(n=t),n&&(n.DATUM?t.datumCode=n.DATUM.name.toLowerCase():t.datumCode=n.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(t.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=n.DATUM.SPHEROID.a,t.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(t.datum_params=n.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",i],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",i],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",i],["lat0","latitude_of_origin",i],["lat0","standard_parallel_1",i],["lat1","standard_parallel_1",i],["lat2","standard_parallel_2",i],["azimuth","Azimuth"],["alpha","azimuth",i],["srsCode","name"]].forEach(function(e){return s(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=i(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function u(t){var e=[];return t.map(function(t){if(Array.isArray(t)&&"AXIS"===t[0]){var a=[];for(var r in t)0!=r&&a.push(t[r]);e.push(a)}}),e}function l(t){var e=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?l[t]=dt(arguments[1]):l[t]=bt(arguments[1]):l[t]=a}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?l.apply(e,t):l(t)});if("string"==typeof t){if(t in l)return l[t]}else"EPSG"in t?l["EPSG:"+t.EPSG]=t:"ESRI"in t?l["ESRI:"+t.ESRI]=t:"IAU2000"in t?l["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function h(t){return"string"==typeof t}function f(t){return t in l}function d(t){return Ct.some(function(e){return t.indexOf(e)>-1})}function m(e){var a=t(e,"authority");if(a){var r=t(a,"epsg");return r&&St.indexOf(r)>-1}}function c(e){var a=t(e,"extension");if(a)return t(a,"proj4")}function p(t){return"+"===t[0]}function _(t){if(!h(t))return t;if(f(t))return l[t];if(d(t)){var e=bt(t);if(m(e))return l["EPSG:3857"];var a=c(e);return a?dt(a):e}return p(t)?dt(t):void 0}function g(t){return t}function y(t,e){var a=Pt.length;return t.names?(Pt[a]=t,t.names.forEach(function(t){kt[t.toLowerCase()]=a}),this):(console.log(e),!0)}function v(t,e,a,r){var n=t*t,s=e*e,i=(n-s)/n,o=0;return r?(n=(t*=1-i*(et+i*(at+i*rt)))*t,i=0):o=Math.sqrt(i),{es:i,e:o,ep2:(n-s)/s}}function b(e,a,r,n,s){if(!e){var i=t(Rt,n);i||(i=It),e=i.a,a=i.b,r=i.rf}return r&&!a&&(a=(1-1/r)*e),(0===r||Math.abs(e-a)<nt)&&(s=!0,a=e),{a:e,b:a,rf:r,sphere:s}}function C(t,e,a,r,n,s){var i={};return i.datum_type=void 0===t||"none"===t?Y:Q,e&&(i.datum_params=e.map(parseFloat),0===i.datum_params[0]&&0===i.datum_params[1]&&0===i.datum_params[2]||(i.datum_type=K),i.datum_params.length>3&&(0===i.datum_params[3]&&0===i.datum_params[4]&&0===i.datum_params[5]&&0===i.datum_params[6]||(i.datum_type=X,i.datum_params[3]*=$,i.datum_params[4]*=$,i.datum_params[5]*=$,i.datum_params[6]=i.datum_params[6]/1e6+1))),i.a=a,i.b=r,i.es=n,i.ep2=s,i}function Projection(e,a){if(!(this instanceof Projection))return new Projection(e);a=a||function(t){if(t)throw t};var r=_(e);if("object"==typeof r){var n=Projection.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var s=t(zt,r.datumCode);s&&(r.datum_params=s.towgs84?s.towgs84.split(","):null,r.ellps=s.ellipse,r.datumName=s.datumName?s.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var i=b(r.a,r.b,r.rf,r.ellps,r.sphere),o=v(i.a,i.b,i.rf,r.R_A),u=r.datum||C(r.datumCode,r.datum_params,i.a,i.b,o.es,o.ep2);Mt(this,r),Mt(this,n),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,this.init(),a(null,this)}else a(e)}else a(e)}function S(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===K?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==X||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function M(t,e,a){var r,n,s,i,o=t.x,u=t.y,l=t.z?t.z:0;if(u<-tt&&u>-1.001*tt)u=-tt;else if(u>tt&&u<1.001*tt)u=tt;else{if(u<-tt)return{x:-1/0,y:-1/0,z:t.z};if(u>tt)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),n=Math.sin(u),i=Math.cos(u),s=n*n,r=a/Math.sqrt(1-e*s),{x:(r+l)*i*Math.cos(o),y:(r+l)*i*Math.sin(o),z:(r*(1-e)+l)*n}}function w(t,e,a,r){var n,s,i,o,u,l,h,f,d,m,c,p,_,g,y,v,b=t.x,C=t.y,S=t.z?t.z:0;if(n=Math.sqrt(b*b+C*C),s=Math.sqrt(b*b+C*C+S*S),n/a<1e-12){if(g=0,s/a<1e-12)return y=tt,v=-r,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(C,b);i=S/s,f=(o=n/s)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*o*o)),d=i*u,_=0;do{_++,l=e*(h=a/Math.sqrt(1-e*d*d))/(h+(v=n*f+S*d-h*(1-e*d*d))),p=(c=i*(u=1/Math.sqrt(1-l*(2-l)*o*o)))*f-(m=o*(1-l)*u)*d,f=m,d=c}while(p*p>1e-24&&_<30);return y=Math.atan(c/Math.abs(m)),{x:g,y:y,z:v}}function N(t,e,a){if(e===K)return{x:t.x+a[0],y:t.y+a[1],z:t.z+a[2]};if(e===X){var r=a[0],n=a[1],s=a[2],i=a[3],o=a[4],u=a[5],l=a[6];return{x:l*(t.x-u*t.y+o*t.z)+r,y:l*(u*t.x+t.y-i*t.z)+n,z:l*(-o*t.x+i*t.y+t.z)+s}}}function E(t,e,a){if(e===K)return{x:t.x-a[0],y:t.y-a[1],z:t.z-a[2]};if(e===X){var r=a[0],n=a[1],s=a[2],i=a[3],o=a[4],u=a[5],l=a[6],h=(t.x-r)/l,f=(t.y-n)/l,d=(t.z-s)/l;return{x:h+u*f-o*d,y:-u*h+f+i*d,z:o*h-i*f+d}}}function A(t){return t===K||t===X}function G(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function x(t,e){return(t.datum.datum_type===K||t.datum.datum_type===X)&&"WGS84"!==e.datumCode||(e.datum.datum_type===K||e.datum.datum_type===X)&&"WGS84"!==t.datumCode}function k(t,e,a){var r;return Array.isArray(a)&&(a=jt(a)),Lt(a),t.datum&&e.datum&&x(t,e)&&(a=k(t,r=new Projection("WGS84"),a),t=r),"enu"!==t.axis&&(a=Dt(t,!1,a)),"longlat"===t.projName?a={x:a.x*st,y:a.y*st}:(t.to_meter&&(a={x:a.x*t.to_meter,y:a.y*t.to_meter}),a=t.inverse(a)),t.from_greenwich&&(a.x+=t.from_greenwich),a=Tt(t.datum,e.datum,a),e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y}),"longlat"===e.projName?a={x:a.x*it,y:a.y*it}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter})),"enu"!==e.axis?Dt(e,!0,a):a}function P(t,e,a){var r,n,s;return Array.isArray(a)?(r=k(t,e,a),a.length>2?[r.x,r.y].concat(a.splice(2)):[r.x,r.y]):(n=k(t,e,a),2===(s=Object.keys(a)).length?n:(s.forEach(function(t){"x"!==t&&"y"!==t&&(n[t]=a[t])}),n))}function O(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function R(t,e,a){t=O(t);var r,n=!1;return void 0===e?(e=t,t=Ut,n=!0):(void 0!==e.x||Array.isArray(e))&&(a=e,e=t,t=Ut,n=!0),e=O(e),a?P(t,e,a):(r={forward:function(a){return P(t,e,a)},inverse:function(a){return P(e,t,a)}},n&&(r.oProj=e),r)}function I(t,e){return e=e||5,F(j({lat:t[1],lon:t[0]}),e)}function z(t){var e=L(H(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function T(t){return t*(Math.PI/180)}function D(t){return t/Math.PI*180}function j(t){var e,a,r,n,s,i,o,u=t.lat,l=t.lon,h=6378137,f=T(u),d=T(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60),u>=56&&u<64&&l>=3&&l<12&&(o=32),u>=72&&u<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)),i=T(6*(o-1)-180+3),e=h/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),r=.006739496752268451*Math.cos(f)*Math.cos(f);var m=.9996*e*((n=Math.cos(f)*(d-i))+(1-a+r)*n*n*n/6+(5-18*a+a*a+72*r-.39089081163157013)*n*n*n*n*n/120)+5e5,c=.9996*((s=h*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f)))+e*Math.tan(f)*(n*n/2+(5-a+9*r+4*r*r)*n*n*n*n/24+(61-58*a+a*a+600*r-2.2240339282485886)*n*n*n*n*n*n/720));return u<0&&(c+=1e7),{northing:Math.round(c),easting:Math.round(m),zoneNumber:o,zoneLetter:U(u)}}function L(t){var e=t.northing,a=t.easting,r=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var s,i,o,u,l,h,f,d,m=6378137,c=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=a-5e5,_=e;r<"N"&&(_-=1e7),h=6*(n-1)-180+3,d=(f=_/.9996/6367449.145945056)+(3*c/2-27*c*c*c/32)*Math.sin(2*f)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*f)+151*c*c*c/96*Math.sin(6*f),s=m/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),i=Math.tan(d)*Math.tan(d),o=.006739496752268451*Math.cos(d)*Math.cos(d),u=.99330562*m/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),l=p/(.9996*s);var g=d-s*Math.tan(d)/u*(l*l/2-(5+3*i+10*o-4*o*o-.06065547077041606)*l*l*l*l/24+(61+90*i+298*o+45*i*i-1.6983531815716497-3*o*o)*l*l*l*l*l*l/720);g=D(g);var y=(l-(1+2*i+o)*l*l*l/6+(5-2*o+28*i-3*o*o+.05391597401814761+24*i*i)*l*l*l*l*l/120)/Math.cos(d);y=h+D(y);var v;if(t.accuracy){var b=L({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:g,left:y}}else v={lat:g,lon:y};return v}function U(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function F(t,e){var a="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+W(t.easting,t.northing,t.zoneNumber)+a.substr(a.length-5,e)+r.substr(r.length-5,e)}function W(t,e,a){var r=q(a);return J(Math.floor(t/1e5),Math.floor(e/1e5)%20,r)}function q(t){var e=t%Ft;return 0===e&&(e=Ft),e}function J(t,e,a){var r=a-1,n=Wt.charCodeAt(r),s=qt.charCodeAt(r),i=n+t-1,o=s+e,u=!1;return i>Zt&&(i=i-Zt+Jt-1,u=!0),(i===Ht||n<Ht&&i>Ht||(i>Ht||n<Ht)&&u)&&i++,(i===Bt||n<Bt&&i>Bt||(i>Bt||n<Bt)&&u)&&++i===Ht&&i++,i>Zt&&(i=i-Zt+Jt-1),o>Vt?(o=o-Vt+Jt-1,u=!0):u=!1,(o===Ht||s<Ht&&o>Ht||(o>Ht||s<Ht)&&u)&&o++,(o===Bt||s<Bt&&o>Bt||(o>Bt||s<Bt)&&u)&&++o===Ht&&o++,o>Vt&&(o=o-Vt+Jt-1),String.fromCharCode(i)+String.fromCharCode(o)}function H(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,a=t.length,r=null,n="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,s++}var i=parseInt(n,10);if(0===s||s+3>a)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;r=t.substring(s,s+=2);for(var u=q(i),l=B(r.charAt(0),u),h=V(r.charAt(1),u);h<Z(o);)h+=2e6;var f=a-s;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,m,c,p,_,g=f/2,y=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),m=t.substring(s,s+g),y=parseFloat(m)*d,c=t.substring(s+g),v=parseFloat(c)*d),p=y+l,_=v+h,{easting:p,northing:_,zoneLetter:o,zoneNumber:i,accuracy:d}}function B(t,e){for(var a=Wt.charCodeAt(e-1),r=1e5,n=!1;a!==t.charCodeAt(0);){if(++a===Ht&&a++,a===Bt&&a++,a>Zt){if(n)throw"Bad character: "+t;a=Jt,n=!0}r+=1e5}return r}function V(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var a=qt.charCodeAt(e-1),r=0,n=!1;a!==t.charCodeAt(0);){if(++a===Ht&&a++,a===Bt&&a++,a>Vt){if(n)throw"Bad character: "+t;a=Jt,n=!0}r+=1e5}return r}function Z(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Point(t,e,a){if(!(this instanceof Point))return new Point(t,e,a);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var K=1,X=2,Q=4,Y=5,$=484813681109536e-20,tt=Math.PI/2,et=.16666666666666666,at=.04722222222222222,rt=.022156084656084655,nt=1e-10,st=.017453292519943295,it=57.29577951308232,ot=Math.PI/4,ut=2*Math.PI,lt={};lt.greenwich=0,lt.lisbon=-9.131906111111,lt.paris=2.337229166667,lt.bogota=-74.080916666667,lt.madrid=-3.687938888889,lt.rome=12.452333333333,lt.bern=7.439583333333,lt.jakarta=106.807719444444,lt.ferro=-17.666666666667,lt.brussels=4.367975,lt.stockholm=18.058277777778,lt.athens=23.7163375,lt.oslo=10.722916666667;var ht={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},ft=/[\s_\-\/\(\)]/g,dt=function(e){var a,r,n,s={},i=e.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var a=e.split("=");return a.push(!0),t[a[0].toLowerCase()]=a[1],t},{}),o={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*st},lat_1:function(t){s.lat1=t*st},lat_2:function(t){s.lat2=t*st},lat_ts:function(t){s.lat_ts=t*st},lon_0:function(t){s.long0=t*st},lon_1:function(t){s.long1=t*st},lon_2:function(t){s.long2=t*st},alpha:function(t){s.alpha=parseFloat(t)*st},lonc:function(t){s.longc=t*st},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(e){s.units=e;var a=t(ht,e);a&&(s.to_meter=a.to_meter)},from_greenwich:function(t){s.from_greenwich=t*st},pm:function(e){var a=t(lt,e);s.from_greenwich=(a||parseFloat(e))*st},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(s.axis=t)}};for(a in i)r=i[a],a in o?"function"==typeof(n=o[a])?n(r):s[n]=r:s[a]=r;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s},mt=1,ct=/\s/,pt=/[A-Za-z]/,_t=/[A-Za-z84]/,gt=/[,\]]/,yt=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ct.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case mt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(gt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=mt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=mt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!yt.test(t)){if(gt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},e.prototype.keyword=function(t){if(_t.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=mt)}if(!gt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(pt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(yt.test(t))return this.word=t,void(this.state=3);{if(!gt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)}},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var vt=.017453292519943295,bt=function(t){var e=a(t),r=e.shift(),s=e.shift();e.unshift(["name",s]),e.unshift(["type",r]);var i={},l=u(e);return n(e,i),o(i,l),i};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(l);var Ct=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],St=["3857","900913","3785","102113"],Mt=function(t,e){t=t||{};var a,r;if(!e)return t;for(r in e)void 0!==(a=e[r])&&(t[r]=a);return t},wt=function(t,e,a){var r=t*e;return a/Math.sqrt(1-r*r)},Nt=function(t){return t<0?-1:1},Et=function(t){return Math.abs(t)<=3.14159265359?t:t-Nt(t)*ut},At=function(t,e,a){var r=t*a,n=.5*t;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(tt-e))/r},Gt=function(t,e){for(var a,r,n=.5*t,s=tt-2*Math.atan(e),i=0;i<=15;i++)if(a=t*Math.sin(s),r=tt-2*Math.atan(e*Math.pow((1-a)/(1+a),n))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999},xt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e=t.x,a=t.y;if(a*it>90&&a*it<-90&&e*it>180&&e*it<-180)return null;var r,n;if(Math.abs(Math.abs(a)-tt)<=nt)return null;if(this.sphere)r=this.x0+this.a*this.k0*Et(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ot+.5*a));else{var s=Math.sin(a),i=At(this.e,a,s);r=this.x0+this.a*this.k0*Et(e-this.long0),n=this.y0-this.a*this.k0*Math.log(i)}return t.x=r,t.y=n,t},inverse:function(t){var e,a,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)a=tt-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(-9999===(a=Gt(this.e,s)))return null}return e=Et(this.long0+r/(this.a*this.k0)),t.x=e,t.y=a,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:g,inverse:g,names:["longlat","identity"]}],kt={},Pt=[],Ot={start:function(){xt.forEach(y)},add:y,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==kt[e]&&Pt[kt[e]]?Pt[kt[e]]:void 0}},Rt={};Rt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},Rt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},Rt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},Rt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},Rt.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},Rt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},Rt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},Rt.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},Rt.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},Rt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},Rt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},Rt.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},Rt.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},Rt.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},Rt.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},Rt.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},Rt.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},Rt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},Rt.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},Rt.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},Rt.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},Rt.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},Rt.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},Rt.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},Rt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},Rt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},Rt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},Rt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},Rt.hough={a:6378270,rf:297,ellipseName:"Hough"},Rt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},Rt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},Rt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},Rt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},Rt.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},Rt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},Rt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},Rt.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},Rt.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},Rt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},Rt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},Rt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var It=Rt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Rt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var zt={};zt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},zt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},zt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},zt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},zt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},zt.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},zt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},zt.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},zt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},zt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},zt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},zt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},zt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},zt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},zt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},zt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},zt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},Projection.projections=Ot,Projection.projections.start();var Tt=function(t,e,a){return S(t,e)?a:t.datum_type===Y||e.datum_type===Y?a:t.es!==e.es||t.a!==e.a||A(t.datum_type)||A(e.datum_type)?(a=M(a,t.es,t.a),A(t.datum_type)&&(a=N(a,t.datum_type,t.datum_params)),A(e.datum_type)&&(a=E(a,e.datum_type,e.datum_params)),w(a,e.es,e.a,e.b)):a},Dt=function(t,e,a){var r,n,s,i=a.x,o=a.y,u=a.z||0,l={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==a.z)switch(0===s?(r=i,n="x"):1===s?(r=o,n="y"):(r=u,n="z"),t.axis[s]){case"e":l[n]=r;break;case"w":l[n]=-r;break;case"n":l[n]=r;break;case"s":l[n]=-r;break;case"u":void 0!==a[n]&&(l.z=r);break;case"d":void 0!==a[n]&&(l.z=-r);break;default:return null}return l},jt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Lt=function(t){G(t.x),G(t.y)},Ut=Projection("WGS84"),Ft=6,Wt="AJSAJS",qt="AFAFAF",Jt=65,Ht=73,Bt=79,Vt=86,Zt=90,Kt={forward:I,inverse:function(t){var e=L(H(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:z};Point.fromMGRS=function(t){return new Point(z(t))},Point.prototype.toMGRS=function(t){return I([this.x,this.y],t)};return R.defaultDatum="WGS84",R.Proj=Projection,R.WGS84=new R.Proj("WGS84"),R.Point=Point,R.toPoint=jt,R.defs=l,R.transform=k,R.mgrs=Kt,R.version="2.5.1-alpha",R});